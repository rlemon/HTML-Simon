(function(){var v=document.getElementsByClassName("pad"),m=document.getElementById("display"),p=[],i=[],a,o;function q(x){this.className+=" active"}function b(x){d.apply(this);k.apply(this)}function d(){this.className=this.className.replace(/ active/,"")}function f(x){this.className+=" hover"}function h(x){this.className=this.className.replace(/ hover/,"")}function k(){if(v[i.shift()]!=this){e();return}r()}function s(x){while(x.hasChildNodes()){x.removeChild(x.lastChild)}}function u(x){s(m);m.appendChild(document.createTextNode(x))}function t(){Array.prototype.forEach.call(v,function(x){x.style.cursor="pointer";x.addEventListener("mouseover",f,false);x.addEventListener("mouseout",h,false);x.addEventListener("mousedown",q);x.addEventListener("mouseup",b)})}function l(){Array.prototype.forEach.call(v,function(x){x.style.cursor="default";x.removeEventListener("mouseover",f);x.removeEventListener("mouseout",h);x.removeEventListener("mousedown",q);x.removeEventListener("mouseup",b)})}function e(){u("You Lose!");setTimeout(function(){n()},2000)}function j(){l();a++;o-=a*5;u("Level "+a);setTimeout(function(){u("Ready?")},o);setTimeout(function(){u("Begin!")},o*2);setTimeout(function(){c();u("SIMON SAYS");g()},o*3)}function c(){var z=[];for(var y=0,x=(3+a);y<x;y++){z.push(Math.floor(Math.random()*3))}p=z.slice(0),i=z.slice(0)}function g(){var x=v[p.shift()];q.apply(x);setTimeout(function(){d.apply(x);if(p.length>0){setTimeout(g,o)}else{u("Go!");setTimeout(function(){t();r()},2000)}},300)}function r(){if(i.length==0){u("You Win!");setTimeout(function(){j()},2000)}else{u("turns "+i.length)}}function w(){this.style.cursor="default";j();this.removeEventListener("click",w)}function n(){a=0;o=2005;u("START");m.style.cursor="pointer";m.addEventListener("click",w)}n()}());
